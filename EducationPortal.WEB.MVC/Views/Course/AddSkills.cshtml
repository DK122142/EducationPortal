@using Castle.Core.Internal
@model EducationPortal.WEB.MVC.ViewModels.CourseContinueCreateViewModel

@addTagHelper *, EducationPortal.WEB.MVC

@{
    ViewData["Title"] = "Add skills to course";
}

<h1>@ViewData["Title"]</h1>

<div>
    <h3>Added skills</h3>
        <div>
            @if (!Model.CourseModel.Skills.IsNullOrEmpty())
            {
                <table class="table">
                    <tr>
                        <th>Name</th>
                    </tr>
                    @foreach (var skill in Model.CourseModel.Skills)
                    {
                        <tr>
                            <td>@skill.Name</td>
                        </tr>
                    }
                </table>
            }
        </div>
</div>

<div>
    <div>
        <table class="table">
            <tr>
                <th>Name</th>
                <th>Description</th>
            </tr>
            @foreach (var skill in Model.Skills.Models)
            {
        <tr>
            <td>@skill.Name</td>
            <td>@skill.Description</td>
            @if (Model.CourseModel.Skills.IsNullOrEmpty() || 
                 !Model.CourseModel.Skills.Select(s=>s.Id).Contains(skill.Id))
            {
                <td>
                    <form asp-controller="Course" asp-action="AddSkill" asp-route-courseId="@Model.CourseModel.Id" asp-route-id="@skill.Id" method="post">
                        <button type="submit" class="btn btn-sm btn-outline-primary">
                            Add
                        </button>
                    </form>
                </td>
            }
            else
            {
                <td>
                    Added
                </td>
            }
        </tr>
            }
        </table>
    </div>
    <div>
        <page-link page-model="Model.Skills.PageViewModel" page-action="AddSkills"></page-link>
    </div>
</div>